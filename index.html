<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SEO -->
    <title>Jirabot</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext" rel="stylesheet">
    <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>


    <!-- CSS Base -->
    <link rel="stylesheet" type='text/css' media='all' href="static/css/webslides.css">

    <!-- Optional - CSS SVG Icons (Font Awesome) -->
    <link rel="stylesheet" type="text/css" media="all" href="static/css/svg-icons.css">

    <!-- SOCIAL CARDS (ADD YOUR INFO) -->

  </head>
    
  <body>

    <main role="main">
      <article id="webslides" class="vertical">

        <section>
          <div class="wrap aligncenter">
            <h1 class="text-landing zoomIn">заБ<i class="fab fa-telegram"></i>Тимся о проекте</h1>
            <p class="text-intro zoomIn" >
              Солдатов Анатолий<br>
              <img src="static/images/logo.jpg" style="width: 100px; height: 130px; border-radius: 40%;">
            </p>
          </div>
        </section>
          
        <section>
          <div class="wrap">
            <div class="content">
              <h2>Инфраструктура</h2>
            </div>  
            <ul class="flexblock features">
              <li>
                <div>
                  <h2><span><i class="fas fa-terminal"></i></span></h2>
                  Администрирование
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-code"></i></span>
                  </h2>
                  Разработка
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-shield-alt"></i></span>
                  </h2>
                  Безопасность
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-sitemap"></i></span>
                  </h2>
                  Архитектура
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-cogs"></i></span>
                  </h2>
                  CI/CD
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-database"></i></span>
                  </h2>
                  Работа с данными
                </div>
              </li>
            </ul>
          </div>
          <!-- .end .wrap -->
        </section>

          
        <section class="fullscreen bg-blue">
          <!-- Fullscreen Video -->
          <div class="embed dark">
            <div data-youtube data-youtube-id="JzRUbdqa_hU" data-autoplay data-loop data-mute data-no-controls></div>
          </div>
          <!-- .end .embed -->
          <div class="wrap aligncenter">
            <h2><strong>Зачем нужна инфраструктура</strong></h2>
          </div>
          <!-- .end .wrap -->
        </section>

        <section class="fullscreen bg-blue">
          <div class="embed dark">
            <div data-youtube data-youtube-id="ksOwanrnH74" data-autoplay data-loop data-mute data-no-controls></div>
          </div>
          <!-- .end .embed -->
          <div class="wrap aligncenter">
            <h2><strong>ГИС ЖКХ</strong></h2>
          </div>
        </section>
          
        <section>
          <div class="wrap">
            <div class="content-left">
              <h3>Что общего у базиста и аналитика?</h3>
            <br>    
              <details>
                <summary>Правильный ответ</summary>  
                <pre>Данные. И тем и другим нужны данные.</pre>
              </details>
            <div>
                <img src="static/images/grafik_serdce.jpg">
              </div>  
            </div>
            <!-- end .content-left -->
            <div class="content-right">
              <!-- <div class="embed"> = Responsive -->
              <div>
                <img src="static/images/graph.jpg">
              </div>
              <!-- end .embed -->
            </div>
            <!-- end .content-left -->
          </div>
          <!-- .end .wrap -->
        </section>

        <section>
          <!--.wrap = container (width: 90%) -->
          <div class="wrap">
            <div class="content-left">
              <h2>Кому нужны данные?</h2>
            </div>
            <div class="content-left">
            <p>Данные нужны всем (смотри предыдущий слайд). Но доступ только у инфраструктуры <i class="fas fa-long-arrow-alt-right"></i> все идут к инфраструктуре.  </p>
            </div>
            <ul class="flexblock features">
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-database"></i></span>
                    Разработчик
                  </h2>
                  Нужно разобраться, почему не работает поиск по  сайту 
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-database"></i></span>
                    Аналитик
                  </h2>
                  Нужно сделать отчет для министерства
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span><i class="fas fa-database"></i></span>
                    Поддержка
                  </h2>
                  Нужны данные о руководителе организации для разбора обращения от пользователя
                </div>
              </li>
            </ul>
          </div>
          <!-- .end .wrap -->
        </section>
 
          
        <section class="bg-black aligncenter">
          <span class="background light" style="background-image:url('static/images/owl.jpg')"></span>
          <div class="wrap">
            <div class="grid vertical-align">
              <div class="column">
                <h3 style="margin-right: auto;"><strong>Прототип за ночь</strong></h3>
              </div>
                <div class="column"></div>
              <!-- .end .column -->
            </div>
            <!-- .end .grid -->
          </div>
          <!-- .end .wrap -->
        </section>  

          
        <section>
          <div class="wrap">
            <div class="content">
                <img src="static/images/jirabot_in_action.png">
            </div>
          </div>
        </section>
          
        <section>
          <div class="wrap">
            <div class="content-left">
              <h3>Боты </h3>
                <br>
                <div>
                    <h3>Jirabot</h3>
                    <p>
                    1. Интерфейс – JIRA <br>
                    4. Не банят :)
                    </p>
                    <img src="static/images/jirabot.jpg" style="width: 400px; height: 400px;">    
                </div>
                <br><br><br>
            </div>
            <!-- end .content-left -->
            <div class="content-right">
              <div>
                <img src="static/images/block.jpg" style="width: 600px; height: 300px;">
                <br><br><br>
                <h3>Telegram</h3>
                    <p>
                    1. Интерфейс – Telegram <br>
                    2. Банят, но не совсем :) <br>

                    </p>  
              </div>   
            </div>
            <!-- end .content-left -->
          </div>
          <!-- .end .wrap -->
        </section>
          
        <section class="aligncenter">
          <div class="wrap">
            <div class="content">
                <div>
                    <h3>Highload</h3>
                </div>
            </div>
            <div class="content">
              <div>
                <img src="static/images/donkey-heavyload.png" style="width: 600px; height: 300px;"> 
              </div>   
            </div>
            <!-- end .content-left -->
          </div>
          <!-- .end .wrap -->
        </section>
          
        <section>
          <div class="wrap">
            <div class="content-left">
            <h3>Jirabot</h3>    
<pre style="font-size:14px;">@app.route('/')
@login_required
@log_action
def tasks():
    # parse helpdesk tasks
    jira = get_jira_connection('helpdesk')
    task_list = list()
    task_list += jira.parse_issues(JIRA_HELPDESK_SEARCH_CONDITION)
    # parse lanit tasks
    jira = get_jira_connection('lanit')
    try:
        task_list += jira.parse_issues(JIRA_LANIT_SEARCH_CONDITION)
    except IndexError:
        pass
    return render_template('tasks/tasks.html', tasks=task_list), 'Rendering template tasks/tasks.html'

@app.route('/get_query_cost', methods=['GET'])
@login_required
@log_action
def get_query_cost():
    arguments = request.args.to_dict()
    try:
        c = get_database_connection(arguments['dbname'])
        cost = c.get_query_plan(arguments['query'])
    except Exception as e:
        resp = {"result": {
            "message": str(e)
        }}
        return jsonify(resp), str(e)
    resp = {"result": {
        "message": cost[0][0][0]['Plan']['Total Cost']
    }}
    return jsonify(resp), 'Task finished.'</pre>
            </div>
            <div class="content-right">
              <div class="column">
                <h3>Telegram</h3>  
                <pre style="font-size:14px;"># Создание задачи: имя задачи в Jira; имя базы данных; текст запроса
# Удаление задачи: имя задачи в Jira
def handle_updates(updates):
    for update in updates["result"]:
        try:
            text = update["message"]["text"]
            chat = update["message"]["chat"]["id"]

            try:
                jira_task, database_name, query = text.split(";")
                jira_task = re.sub(r"\s+", "", jira_task)
                database_name = re.sub(r"\s+", "", database_name)
            except Exception as e:
                jira_task, database_name, query = [text, None, None]

            database_result = db.get_items()
            jira_tasks = [task[0] for task in database_result]
            print(jira_tasks)

            if text == "delete":
                keyboard = build_keyboard(jira_tasks)
                send_message("Select task to delete", chat, keyboard)
            elif jira_task in jira_tasks:
                db.delete_item(jira_task)
            elif jira_task is not None and database_name is not None and query is not None:
                db.add_item(jira_task, database_name, query)

        except KeyError:
            pass</pre>
              </div>   
            </div>
            <!-- end .content-left -->
          </div>
          <!-- .end .wrap -->
        </section>          

        <section>
          <div class="wrap">
            <div class="content-left">
                <h3>Jirabot</h3>
                <img src="static/images/jirabot_Web.png" style="width: 700px; height: 400px;">  
            </div>
            <!-- end .content-left -->
            <div class="content-right">
                <h3>Telegram</h3>
                <img src="static/images/telegram.png" style="width: 400px; height: 400px;">  
              </div>   
            </div>
          <!-- .end .wrap -->
        </section>
          
        <section class="bg-black aligncenter">
          <span class="background light" style="background-image:url('https://images.unsplash.com/photo-1481926843113-ac9cb3fb9c8f?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=7d4cbe6845ddba7e4ddcd8fa84abc0d8&auto=format&fit=crop&w=1500&q=80')"></span>
          <div class="wrap size-50">
            <h1 class="text-landing text-shadow">PROFIT</h1>
          </div>
        </section>          
          
        <section class="aligncenter bg-black">
          <span class="background anim" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span>
          <div class="wrap">
            <h2>Спасибо за ваше время!</h2>
            <p>А еще у меня есть стикеры :)</p>  
          </div>
          <!-- .end .wrap -->
        </section>

      </article>
    </main>
    <!--main-->

    <!-- Required -->
    <script src="static/js/webslides.js"></script>

    <!-- Autoslide 5 seconds. If you want autoslide, add: {autoslide: 5000} -->
    <script>
      window.ws = new WebSlides();
    </script>

    <!-- OPTIONAL - svg-icons.js (fontastic.me - Font Awesome as svg icons) -->
    <script defer src="static/js/svg-icons.js"></script>

  </body>
</html>
